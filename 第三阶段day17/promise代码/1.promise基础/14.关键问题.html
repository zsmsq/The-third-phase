<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>关键问题</title>
</head>
<body>
<div id="box"></div>
</body>
<script type="text/javascript">
    //promise的几个关键问题
    //1. 如何改变promise实例对象的状态?
    /* let p = new Promise((resolve,reject)=>{
        // 成功状态:fulfilled
        // resolve()

        // 失败状态:rejected
        // reject()

        // 失败状态
        throw 'err';
    })
    console.log(p) */


    //2. 为 promise 对象指定多个成功或失败的回调
    // let p = new Promise((resolve,reject)=>{
    //     resolve('ok1')
    // })

    // p.then(value=>{
    //     console.log(value)
    // },reason=>{
    //     console.log(reason)
    // })

    // p.then(value=>{
    //     console.log(value)
    // },reason=>{
    //     console.log(reason)
    // })
    
    // p.then(value=>{
    //     console.log(value)
    // },reason=>{
    //     console.log(reason)
    // })


    //3. 改变 promise 状态和指定回调函数谁先谁后?
    // 换句话来说，resolve/reject 函数  与  p.then方法 谁先谁后执行？
    // 不一定
    // 正常请求：resolve/reject 函数 先执行，p.then方法 后执行

    // promise处理成功和失败的结果的回调函数是异步的
    // p.then() 中的两个参数是异步的


    /* let p = new Promise((resolve,reject)=>{
        console.log(1111)
        resolve()
    })

    let res = p.then(value=>{
        console.log(value)
    },reason=>{
        console.log(reason)
    })

    console.log(res) */

    // 非正常请求：p.then方法 先执行，resolve/reject 函数 后执行

    let p = new Promise((resolve,reject)=>{
        setTimeout(function(){
            console.log(1111)
            resolve()
        },3000)
    })
    
    let res = p.then(value=>{
        console.log(value)
    },reason=>{
        console.log(reason)
    })

    console.log(res)



</script>
</html>